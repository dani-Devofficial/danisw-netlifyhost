<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>네이버 로그인 Callback</title>
<style>
    body { display:flex; flex-direction:column; justify-content:center; align-items:center; height:100vh; font-family:sans-serif; background:#f0f0f0; }
    #profile { font-size:18px; }
</style>
</head>
<body>

<div id="profile">로그인 정보 가져오는 중...</div>

<script>
window.onload = async () => {
    if (window.location.hash) {
        const hash = window.location.hash.substring(1);
        const params = new URLSearchParams(hash);
        const accessToken = params.get("access_token");

        if (accessToken) {
            try {
                const res = await fetch("https://openapi.naver.com/v1/nid/me", {
                    headers: { Authorization: `Bearer ${accessToken}` }
                });
                const data = await res.json();

                if (data.response) {
                    const name = data.response.name;
                    const id = data.response.id;
                    document.getElementById("profile").innerHTML = `이름: ${name}<br>아이디: ${id}`;
                } else {
                    document.getElementById("profile").innerText = "정보를 가져올 수 없음";
                }
            } catch(e) {
                document.getElementById("profile").innerText = "오류 발생";
                console.error(e);
            }
        } else {
            document.getElementById("profile").innerText = "Access Token이 없습니다";
        }
    } else {
        document.getElementById("profile").innerText = "Hash 값이 없습니다";
    }
};
</script>

</body>
</html>
